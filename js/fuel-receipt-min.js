var billDate=document.getElementById("billDate"),billTime=document.getElementById("billTime");const toggleSpinner=document.querySelector("#downloadPDF .spinner-grow"),toggleDownload=document.querySelector("#downloadPDF .download-text");var date=new Date;const changeLogo=document.querySelectorAll("[name='flexRadiologo']"),changecst=document.querySelectorAll("[name='flexRadioCST']"),liveEdit=document.querySelectorAll(".form-control"),logoImage=document.querySelector(".logo"),downloadPDF=document.getElementById("downloadPDF"),cstNumber=document.getElementById("cstNumber"),cstNumberText=document.querySelector(".cst-number-text"),receiptNumber=document.querySelector(".receipt-number"),templateBillDate=document.querySelector(".bill-date"),templateBillTime=document.querySelector(".bill-time"),templateTeleNumber=document.querySelector(".tele-number");let isControlsValid=!0;const objCombine={inputStationName:"pump-name",textboxAddress:"pump-address",inputFuelRate:"fuel-rate",inputAmount:"fuel-amount",billDate:"bill-date",billTime:"bill-time",inputCustomerName:"customer-name",inputVechical:"vehical-number",inputVehcleType:"vehical-type",inputPaymentType:"cash-type",inputInvoiceNumber:"receipt-number"};var readyPage=()=>{try{var e,t,l=document.querySelector("title");l&&(l.innerHTML="Free fuel bills"),document.querySelector("meta[name='keywords']").content="free fuel bills, free petrol bills, free diesel bills, free cng bills",document.querySelector("meta[name='description']").content="Free download fuel bills pdf without login and email"}catch(n){console.log("Error : "+n)}billDate.value=date.toISOString().substring(0,10),billTime.value=date.toISOString().substring(11,16),templateBillDate.innerHTML=date.toISOString().substring(0,10),templateBillTime.innerHTML=date.toISOString().substring(11,16),receiptNumber.innerHTML=Math.floor(1e3+9e3*Math.random()),templateTeleNumber.innerHTML=Math.floor(1e6+9e6*Math.random())};readyPage(),changeLogo.forEach(e=>e.addEventListener("click",e=>{"logo-bharat-petroleum"==e.currentTarget.id?logoImage.src="images/bill/bharat-petrol-logo.png":"logo-indian-oil"==e.currentTarget.id?logoImage.src="images/bill/indian-oil.png":"logo-hp-oil"==e.currentTarget.id?logoImage.src="images/bill/HP-petroleum.png":"logo-essar-oil"==e.currentTarget.id&&(logoImage.src="images/bill/essar-oil.png")})),changecst.forEach(e=>e.addEventListener("click",e=>{"cst-none"==e.currentTarget.id?(cstNumber.style.display="none",cstNumberText.style.display="none"):(cstNumber.style.display="block",cstNumberText.style.display="block")})),liveEdit.forEach(function(e){["keyup","change"].forEach(function(t){e.addEventListener(t,function(){objCombine[e.id],document.querySelector("."+objCombine[e.id]).innerHTML=e.value})})});var checkValidation=(e,t,l,n)=>{if("Name"==t){var r=/\d/g,a=/\W/g;return""==e?(n(!1,l+" cannot be  empty!"),!1):e.length>35?(n(!1,l+" cannot be more than 35 characters!"),!1):r.test(e)?(n(!1,l+" cannot contain numbers and space!"),!1):(n(!0,l+" validated successfully!"),!0)}if("Empty"==t)return""==e?(n(!1,l+" cannot be empty!"),!1):(n(!0,l+" validated successfully!"),!0)},addDynamicData=e=>{let t=document.getElementById("inputStationName"),l=document.getElementById("textboxAddress"),n=document.getElementById("inputFuelRate"),r=document.getElementById("inputAmount"),a=document.getElementById("billDate"),i=document.getElementById("billTime"),o=document.getElementById("inputCustomerName"),c=document.getElementById("inputVechical"),s=document.getElementById("inputVehcleType"),u=document.getElementById("inputPaymentType");document.getElementById("inputInvoiceNumber");let m=document.getElementById("ErrorStationName"),d=document.getElementById("ErrorAdress"),y=document.getElementById("ErrorFuelRate"),g=document.getElementById("ErrorAmount");document.getElementById("ErrorBillDate"),document.getElementById("ErrorBillTime");let p=document.getElementById("ErrorCustomerName"),b=document.getElementById("ErrorVechical");document.getElementById("ErrorVechleType"),document.getElementById("ErrorPaymentType"),document.getElementById("ErrorInvoiceNumber"),checkValidation(t.value,"Empty","Station name",function(e,t){e?m.style.display="none":(m.innerHTML=t,m.style.display="block")}),checkValidation(l.value,"Empty","Address",function(e,t){e?d.style.display="none":(d.innerHTML=t,d.style.display="block")}),checkValidation(n.value,"Empty","Fuel rate",function(e,t){e?y.style.display="none":(y.innerHTML=t,y.style.display="block")}),checkValidation(r.value,"Empty","Amount",function(e,t){e?g.style.display="none":(g.innerHTML=t,g.style.display="block")}),checkValidation(o.value,"Name","Costomer name",function(e,t){e?p.style.display="none":(p.innerHTML=t,p.style.display="block")}),checkValidation(c.value,"Empty","Vechical number",function(e,t){e?b.style.display="none":(b.innerHTML=t,b.style.display="block")});let E=document.getElementsByClassName("validation-message");if(isControlsValid=!0,Object.keys(E).some(function(e){if("block"==E[e].style.display){t="ErrorAdress"==E[e].id?130:80;var t,l=E[e].getBoundingClientRect().top+window.pageYOffset-t;return window.scrollTo({top:l,behavior:"smooth"}),E[e].previousElementSibling.focus(),isControlsValid=!1,!0}}),isControlsValid){let T=document.querySelector(".pump-name"),v=document.querySelector(".pump-address"),S=document.querySelector(".fuel-rate"),f=document.querySelector(".cst-number"),h=document.querySelector(".tele-number"),$=document.querySelector(".fuel-amount"),I=document.querySelector(".bill-date"),B=document.querySelector(".bill-time"),L=document.querySelector(".customer-name"),q=document.querySelector(".vehical-number"),H=document.querySelector(".vehical-type"),M=document.querySelector(".cash-type");T.innerHTML=t.value,v.innerHTML=l.value,S.innerHTML=n.value,f.innerHTML=r.value,h.innerHTML=t.value,$.innerHTML=r.value,I.innerHTML=a.value,B.innerHTML=i.value,L.innerHTML=o.value,q.innerHTML=c.value,H.innerHTML=s.value,M.innerHTML=u.value,e(!0,"Template ready")}else e(!1,"Template not ready")},resetPage=e=>{toggleSpinner.style.display="none",toggleDownload.innerHTML="Download"};downloadPDF.addEventListener("click",()=>{addDynamicData((e,t)=>{if(e){toggleSpinner.style.display="inline-block",toggleDownload.innerHTML="PDF Generating...";let l=document.getElementById("billContainer");var n={jsPDF:{format:"a4",orientation:"portrait"},html2canvas:{letterRendering:!0,useCORS:!0,logging:!0,scrollX:0,scrollY:0},margin:0,image:{type:"jpeg",quality:.5}};html2pdf().set(n).from(l).toPdf().save("Fuel bill by Generate Receipt").then(e=>{resetPage(),gtag("event","Bill PDF download",{eventCategory:"category_value",dimension5:"custom data"})}).catch(e=>{console.log("PDF Error "+e)})}else console.log(t)})});